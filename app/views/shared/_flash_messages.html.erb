<%# Copyright 2023-2024, Pablo Fernandez

This file is part of Repeater World.

Repeater World is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General
Public License as published by the Free Software Foundation, either version 3 of the License.

Repeater World is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
details.

You should have received a copy of the GNU Affero General Public License along with Repeater World. If not, see
<https://www.gnu.org/licenses/>.%>

<%# Show flash messages, only once in the page. %>

<%# This partial can be called in many different pages, but only one will successfully show the flash messages, so we
    can be liberal with all the places in which we call them and since templates are rendered inside out, generally we
    end up with flash messages show in the most specific location.%>

<% if !@flash_messages_shown %>
  <% if flash.key? :alert %>
    <%= render "shared/flash_message", { wrapper_css: "bg-red-100 dark:bg-red-950/30
                                                       border-red-700 dark:border-red-500",
                                         message: flash.alert,
                                         message_css: "text-red-800 dark:text-red-400",
                                         icon: "fa-burst",
                                         icon_css: "text-red-700 dark:text-red-600",
                                         dismiss_css: "text-red-500 dark:text-red-600
                                                       hover:text-red-700 hover:bg-red-200
                                                       dark:hover:text-red-300 dark:hover:bg-red-900/50
                                                       focus:outline focus:bg-red-200 focus:text-red-500  outline-red-600
                                                       dark:focus:text-red-300 dark:focus:bg-red-900/50" } %>
  <% end %>
  <% if flash.key? :warn %>
    <%= render "shared/flash_message", { wrapper_css: "bg-yellow-100 dark:bg-yellow-950/30
                                                       border-yellow-700 dark:border-yellow-500",
                                         message: flash[:warn],
                                         message_css: "text-yellow-800 dark:text-yellow-400",
                                         icon: "fa-triangle-exclamation",
                                         icon_css: "text-yellow-800 dark:text-yellow-400",
                                         dismiss_css: "text-yellow-600 dark:text-yellow-600
                                                       hover:text-yellow-800 hover:bg-yellow-200
                                                       dark:hover:text-yellow-300 dark:hover:bg-yellow-900/50
                                                       focus:outline focus:bg-yellow-200 focus:text-yellow-500 outline-yellow-600
                                                       dark:focus:text-yellow-300 dark:focus:bg-yellow-900/50" } %>
  <% end %>
  <% if flash.key? :notice %>
    <%= render "shared/flash_message", { wrapper_css: "bg-green-100 dark:bg-green-950/30
                                                       border-green-700 dark:border-green-500",
                                         message: flash.notice,
                                         message_css: "text-green-800 dark:text-green-300",
                                         icon: "fa-circle-info",
                                         icon_css: "text-green-700 dark:text-green-600",
                                         dismiss_css: "text-green-500 dark:text-green-600
                                                       hover:text-green-700 hover:bg-green-200
                                                       dark:hover:text-green-300 dark:hover:bg-green-900/50
                                                       focus:outline focus:bg-green-200 focus:text-green-500  outline-green-600
                                                       dark:focus:text-green-300 dark:focus:bg-green-900/50" } %>
  <% end %>
<% end %>

<% @flash_messages_shown = true %>
